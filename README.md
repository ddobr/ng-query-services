# NgQueryServices

Данный репозиторий представляет из себя MVP реализацию утилиты для выбора нужных
реализаций сервиса в зависимости от query-параметров, а также пример работы
данной утилиты.

## Зачем?

У приложения существуют страницы, базовый функционал и верстка которых могут
быть переиспользованы, при этом поведение должно немного отличаться, а
возможности вынести эту страницу в отдельную компоненту нет.

Например, по умолчанию страница работает в привычном режиме, но появилась
необходимость добавить онбординг. Было бы удобно, чтобы при указания в
query-параметрах соответствующего флага, кнопки бы переставили вести себя
привычным образом и срабатывали в соответствии с процессом онбординга. К
примеру, кнопка "Сохранить" не работала, если не открыт нужный этап урока.

## Принцип работы

Утилита представляет из себя функцию-помощника, которая просто делает нужный
провайд того или иного сервиса в зависимости от указанных query-параметров

## Плюсы

- более явное документирование поведения, программист сразу видит, какие
  провайды используются при каких квери-параметрах;
- меньше бойлерплейта. сравните:
  ```ts
  createQueryProvider(
      REQUEST_SERVICE_TOKEN,
      'mode',
      [
        {
          paramValue: 'a',
          provider: ARequestService,
        },
      ],
      DefaultRequestService
    )
  ```
  и
  ```ts
    {
      provide: REQUEST_SERVICE_TOKEN,
      useFactory: () => {
        const activatedRoute: ActivatedRoute = inject(ActivatedRoute);

        if (activatedRoute.snapshot.queryParams.mode === 'a') {
          return ARequestService;
        }

        return DefaultRequestService
      }
    }
  ```


## Минусы

- необходимость в перезагрузке страницы, если изменился наблюдаемый
  query-параметр, т.к. нужно заново провайдить актуальный сервис, а в рантайме
  это сделать невозможно;
